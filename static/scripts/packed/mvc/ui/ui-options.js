define(["utils/utils"],function(b){var a=Backbone.View.extend({initialize:function(f){this.optionsDefault={value:[],visible:true,data:[],id:b.uuid(),empty:"No data available"};this.options=b.merge(f,this.optionsDefault);this.setElement(this._template(this.options));if(!this.options.visible){this.$el.hide()}this.update(this.options.data);if(this.options.value){this.value(this.options.value)}var e=this;this.on("change",function(){e._change()})},update:function(f){var h=this._getValue();this.$el.find(".ui-option").remove();for(var g in f){this.$el.append(this._templateOption(f[g]))}var e=this;this.$el.find("input").on("change",function(){e.value(e._getValue());e._change()});this._refresh();this.value(h)},exists:function(f){if(typeof f==="string"){f=[f]}for(var e in f){if(this.$el.find('input[value="'+f[e]+'"]').length>0){return true}}return false},first:function(){var e=this.$el.find("input");if(e.length>0){return e.val()}else{return undefined}},_change:function(){if(this.options.onchange){this.options.onchange(this._getValue())}},_refresh:function(){this.$el.find(".ui-error").remove();var e=this.$el.find("input").length;if(e==0){this.$el.append(this._templateEmpty())}},_getValue:function(){var f=this.$el.find(":checked");if(f.length==0){return null}if(this.options.multiple){var e=[];f.each(function(){e.push($(this).val())});return e}else{return f.val()}},_templateEmpty:function(){return'<div class="ui-error">'+this.options.empty+"</div>"}});var c={};c.View=a.extend({initialize:function(e){e.multiple=true;a.prototype.initialize.call(this,e)},value:function(e){if(typeof e==="string"){e=[e]}if(e!==undefined){this.$el.find("input").prop("checked",false);for(var f in e){this.$el.find("input[value="+e[f]+"]").prop("checked",true)}}return this._getValue()},_templateOption:function(e){return'<div class="ui-option"><input type="checkbox" name="'+this.options.id+'" value="'+e.value+'"/>'+e.label+"<br></div>"},_template:function(){return'<div class="ui-checkbox"/>'}});var d={};d.View=a.extend({initialize:function(e){a.prototype.initialize.call(this,e)},value:function(e){if(e!==undefined){this.$el.find("input").prop("checked",false);this.$el.find("label").removeClass("active");this.$el.find('[value="'+e+'"]').prop("checked",true).closest("label").addClass("active")}return this._getValue()},_templateOption:function(e){return'<label class="ui-option btn btn-default"><input type="radio" name="'+this.options.id+'" value="'+e.value+'">'+e.label+"</label>"},_template:function(){return'<div class="btn-group ui-radiobutton" data-toggle="buttons"/>'}});return{Checkbox:c,RadioButton:d}});