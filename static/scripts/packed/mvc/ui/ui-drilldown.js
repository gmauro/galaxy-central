define(["utils/utils","mvc/ui/ui-options"],function(b,a){var c=a.Base.extend({initialize:function(d){this.display=d.display||"checkbox";d.multiple=(this.display=="checkbox");a.Base.prototype.initialize.call(this,d)},_templateOption:function(d,f,e){return'<div><input name="'+this.options.id+'" class="ui-option" type="'+this.display+'" value="'+f+'">'+b.sanitize(d)+"<div/>"},_templateOptions:function(g,h){var e=this;function f(l,m){function k(n){if(n){m.fadeIn("fast");l.removeClass("toggle-expand");l.addClass("toggle");l.is_expanded=true}else{m.hide();l.removeClass("toggle");l.addClass("toggle-expand");l.is_expanded=false}}l.on("click",function(){k(!l.is_expanded)})}function d(q,o){for(i in o){var r=o[i];var m=r.options.length>0;var l=$("<div/>");if(m){var n=$('<span class="ui-drilldown-button form-toggle icon-button toggle-expand" style="position: relative; top: 2px;"/>');var k=$("<div/>");k.append(n);k.append(e._templateOption(r.name,r.value));l.append(k);var p=$('<div style="display: none; margin-left: 25px;"/>');d(p,r.options);l.append(p);f(n,p)}else{l.append(e._templateOption(r.name,r.value))}q.append(l)}}var j=$("<div/>");d(j,g);return j},_template:function(d){return'<div class="ui-options drilldown-container" id="'+d.id+'"/>'}});return{View:c}});