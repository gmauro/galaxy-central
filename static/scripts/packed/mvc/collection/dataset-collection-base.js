define(["mvc/dataset/dataset-list-element","mvc/base-mvc","utils/localization"],function(g,c,d){var b=c.ListItemView;var a=b.extend({className:b.prototype.className+" dataset-collection",fxSpeed:"fast",initialize:function(i){if(i.logger){this.logger=this.model.logger=i.logger}this.log("DCBaseView.initialize:",i);b.prototype.initialize.call(this,i)},expand:function(){var i=this;return i._fetchModelDetails().always(function(){i.trigger("expanded",i)})},_renderSubtitle:function(){var i=$('<div class="subtitle"></div>');switch(this.model.get("collection_type")){case"list":return i.text(d("a list of datasets"));case"paired":return i.text(d("a pair of datasets"));case"list:paired":return i.text(d("a list of paired datasets"))}return i},toString:function(){var i=(this.model)?(this.model+""):("(no model)");return"DCBaseView("+i+")"}});a.prototype.templates=(function(){var i=c.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection");return _.extend({},b.prototype.templates,{titleBar:i})}());var f=b.extend({logger:console,className:b.prototype.className+" dataset-collection-element",fxSpeed:"fast",initialize:function(i){if(i.logger){this.logger=this.model.logger=i.logger}this.log("DCEBaseView.initialize:",i);b.prototype.initialize.call(this,i)},toString:function(){var i=(this.model)?(this.model+""):("(no model)");return"DCEBaseView("+i+")"}});f.prototype.templates=(function(){var i=c.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return _.extend({},b.prototype.templates,{titleBar:i})}());var h=g.DatasetListItemView.extend({className:g.DatasetListItemView.prototype.className+" dataset-collection-element",initialize:function(i){if(i.logger){this.logger=this.model.logger=i.logger}this.log("DatasetDCEBaseView.initialize:",i);g.DatasetListItemView.prototype.initialize.call(this,i)},toString:function(){var i=(this.model)?(this.model+""):("(no model)");return"DatasetDCEBaseView("+i+")"}});h.prototype.templates=(function(){var i=c.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return _.extend({},g.DatasetListItemView.prototype.templates,{titleBar:i})}());var e=a.extend({className:a.prototype.className+" dataset-collection-element",_swapNewRender:function(i){g.DatasetListItemView.prototype._swapNewRender.call(this,i);var j=this.model.get("state")||"ok";this.$el.addClass("state-"+j);return this.$el},toString:function(){var i=(this.model)?(this.model+""):("(no model)");return"NestedDCDCEBaseView("+i+")"}});return{DCBaseView:a,DCEBaseView:f,DatasetDCEBaseView:h,NestedDCDCEBaseView:e}});