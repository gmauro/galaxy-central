define(["libs/underscore"],function(j){function d(k){top.__utils__get__=top.__utils__get__||{};if(k.cache&&top.__utils__get__[k.url]){k.success&&k.success(top.__utils__get__[k.url]);console.debug("utils.js::get() - Fetching from cache ["+k.url+"].")}else{g({url:k.url,data:k.data,success:function(l){top.__utils__get__[k.url]=l;k.success&&k.success(l)},error:function(l){k.error&&k.error(l)}})}}function g(l){var k={contentType:"application/json",type:l.type||"GET",data:l.data||{},url:l.url};if(k.type=="GET"||k.type=="DELETE"){if(k.url.indexOf("?")==-1){k.url+="?"}else{k.url+="&"}k.url=k.url+$.param(k.data);k.data=null}else{k.dataType="json";k.url=k.url;k.data=JSON.stringify(k.data)}$.ajax(k).done(function(m){l.success&&l.success(m)}).fail(function(n){var m=null;try{m=jQuery.parseJSON(n.responseText)}catch(o){m=n.responseText}l.error&&l.error(m,n)})}function h(n,k){var l=$('<div class="'+n+'"></div>');l.appendTo(":eq(0)");var m=l.css(k);l.remove();return m}function f(k){if(!$('link[href^="'+k+'"]').length){$('<link href="'+galaxy_config.root+k+'" rel="stylesheet">').appendTo("head")}}function i(k,l){if(k){return j.defaults(k,l)}else{return l}}function b(l,n){var m="";if(l>=100000000000){l=l/100000000000;m="TB"}else{if(l>=100000000){l=l/100000000;m="GB"}else{if(l>=100000){l=l/100000;m="MB"}else{if(l>=100){l=l/100;m="KB"}else{if(l>0){l=l*10;m="b"}else{return"<strong>-</strong>"}}}}}var k=(Math.round(l)/10);if(n){return k+" "+m}else{return"<strong>"+k+"</strong> "+m}}function a(){return"x"+Math.random().toString(36).substring(2,9)}function c(k){var l=$("<p></p>");l.append(k);return l}function e(){var m=new Date();var k=(m.getHours()<10?"0":"")+m.getHours();var l=(m.getMinutes()<10?"0":"")+m.getMinutes();var n=m.getDate()+"/"+(m.getMonth()+1)+"/"+m.getFullYear()+", "+k+":"+l;return n}return{cssLoadFile:f,cssGetAttribute:h,get:d,merge:i,bytesToString:b,uuid:a,time:e,wrap:c,request:g}});