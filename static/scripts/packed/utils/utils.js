define(["libs/underscore"],function(k){function d(l){return $("<div/>").text(l).html()}function e(l){top.__utils__get__=top.__utils__get__||{};if(l.cache&&top.__utils__get__[l.url]){l.success&&l.success(top.__utils__get__[l.url]);console.debug("utils.js::get() - Fetching from cache ["+l.url+"].")}else{h({url:l.url,data:l.data,success:function(m){top.__utils__get__[l.url]=m;l.success&&l.success(m)},error:function(m){l.error&&l.error(m)}})}}function h(m){var l={contentType:"application/json",type:m.type||"GET",data:m.data||{},url:m.url};if(l.type=="GET"||l.type=="DELETE"){if(l.url.indexOf("?")==-1){l.url+="?"}else{l.url+="&"}l.url=l.url+$.param(l.data);l.data=null}else{l.dataType="json";l.url=l.url;l.data=JSON.stringify(l.data)}$.ajax(l).done(function(n){if(typeof n==="string"){try{n=n.replace("Infinity,",'"Infinity",');n=jQuery.parseJSON(n)}catch(o){console.debug(o)}}m.success&&m.success(n)}).fail(function(o){var n=null;try{n=jQuery.parseJSON(o.responseText)}catch(p){n=o.responseText}m.error&&m.error(n,o)})}function i(o,l){var m=$('<div class="'+o+'"></div>');m.appendTo(":eq(0)");var n=m.css(l);m.remove();return n}function g(l){if(!$('link[href^="'+l+'"]').length){$('<link href="'+galaxy_config.root+l+'" rel="stylesheet">').appendTo("head")}}function j(l,m){if(l){return k.defaults(l,m)}else{return m}}function b(m,o){var n="";if(m>=100000000000){m=m/100000000000;n="TB"}else{if(m>=100000000){m=m/100000000;n="GB"}else{if(m>=100000){m=m/100000;n="MB"}else{if(m>=100){m=m/100;n="KB"}else{if(m>0){m=m*10;n="b"}else{return"<strong>-</strong>"}}}}}var l=(Math.round(m)/10);if(o){return l+" "+n}else{return"<strong>"+l+"</strong> "+n}}function a(){return"x"+Math.random().toString(36).substring(2,9)}function c(l){var m=$("<p></p>");m.append(l);return m}function f(){var n=new Date();var l=(n.getHours()<10?"0":"")+n.getHours();var m=(n.getMinutes()<10?"0":"")+n.getMinutes();var o=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+", "+l+":"+m;return o}return{cssLoadFile:g,cssGetAttribute:i,get:e,merge:j,bytesToString:b,uuid:a,time:f,wrap:c,request:h,sanitize:d}});