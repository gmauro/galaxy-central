define(["mvc/user/user-model","utils/metrics-logger","utils/add-logging"],function(a,c,e){function f(k){var j=this;return j._init(k||{})}e(f,"GalaxyApp");f.defaultOptions={root:"/"};f.prototype._init=function h(k){var j=this;j._initLogger(k.loggerOptions||{});j.debug("GalaxyApp.logger: ",j.logger);j._processOptions(k);j.debug("GalaxyApp.options: ",j.options);j.config=k.config||{};j.debug("GalaxyApp.config: ",j.config);j._initUser(k.userJSON||{});j.debug("GalaxyApp.user: ",j.user);return j};f.prototype._processOptions=function d(m){var l=this,n=f.defaultOptions;l.debug("_processOptions: ",m);l.options={};for(var j in n){if(n.hasOwnProperty(j)){l.options[j]=(m.hasOwnProperty(j))?(m[j]):(n[j])}}return l};f.prototype._initUser=function g(k){var j=this;j.debug("_initUser:",k);j.user=new a.User(k);return j};f.prototype._initLogger=function i(k){var j=this;j.debug("_initLogger:",k);j.logger=new c.MetricsLogger(k);return j};f.prototype.toString=function b(){var j=this.user.get("email")||"(anonymous)";return"GalaxyApp("+j+")"};return{GalaxyApp:f}});