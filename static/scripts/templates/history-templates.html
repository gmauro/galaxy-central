<script type="text/template" class="template-history" id="template-history-warning-messages">
{{#if deleted}}{{#warningmessagesmall}}
    This dataset has been deleted.
    {{#if undelete_url}}
        Click <a href="{{ undelete_url }}" class="historyItemUndelete" id="historyItemUndeleter-{{ id }}"
                 target="galaxy_history">here</a> to undelete it
        {{#if purge_url}}
        or <a href="{{ purge_url }}" class="historyItemPurge" id="historyItemPurger-{{ id }}"
           target="galaxy_history">here</a> to immediately remove it from disk
        {{/if}}
    {{/if}}
{{/warningmessagesmall}}{{/if}}

{{#if purged}}{{#warningmessagesmall}}
    This dataset has been deleted and removed from disk.
{{/warningmessagesmall}}{{/if}}

{{#unless visible}}{{#warningmessagesmall}}
    This dataset has been hidden.
    {{#if unhide_url}}
        Click <a href="{{ unhide_url }}" class="historyItemUnhide" id="historyItemUnhider-{{ id }}"
                 target="galaxy_history">here</a> to unhide it
    {{/if}}
{{/warningmessagesmall}}{{/unless}}
</script>

<script type="text/template" class="template-history" id="template-history-titleLink">
<a href="javascript:void(0);"><span class="historyItemTitle">{{ hid }}: {{ name }}</span></a>
</script>

<script type="text/template" class="template-history" id="template-history-hdaSummary">
<div class="hda-summary">
    {{ misc_blurb }}<br />
    format: <span class="{{ data_type }}">{{ data_type }}</span>,
    database:
    {{#if dbkey_unknown_and_editable }}
        <a href="{{ edit_url }}" target="galaxy_main">{{ metadata_dbkey }}</a>
    {{else}}
        <span class="{{ metadata_dbkey }}">{{ metadata_dbkey }}</span>
    {{/if}}
</div>
{{#if misc_info}}
<div class="hda-info">{{ misc_info }}</div>
{{/if}}
</script>

<script type="text/template" class="template-history" id="template-history-failedMetaData">
{{#warningmessagesmall}}
An error occurred setting the metadata for this dataset.
You may be able to <a href="{{ edit_url }}" target="galaxy_main">set it manually or retry auto-detection</a>.
{{/warningmessagesmall}}
</script>

<script type="text/template" class="template-history" id="template-history-downloadLinks">
{{#if meta_files}}
<div popupmenu="dataset-{{id}}-popup">
    <a class="action-button" href="{{download_url}}">Download Dataset</a>
    <a>Additional Files</a>
    {{#each meta_files}}
    <a class="action-button" href="{{meta_download_url}}">Download {{meta_file_type}}</a>
    {{/each}}
</div>
<div style="float:left;" class="menubutton split popup" id="dataset-{{id}}-popup">
    <a href="{{download_url}}" title="Download" class="icon-button disk tooltip"></a>
</div>
{{else}}
<a href="" title="Download" class="icon-button disk tooltip"></a>
{{/if}}
</script>

<script type="text/template" class="template-history" id="template-history-tagArea">
{{! TODO: move to mvc/tag.js templates }}
<div class="tag-area" style="display: none;">
    <strong>Tags:</strong>
    <div class="tag-elt">
    </div>
</div>
</script>

<script type="text/template" class="template-history" id="template-history-annotationArea">
{{! TODO: move to mvc/annotations.js templates, editable-text }}
<div id="{{ id }}-annotation-area" class="annotation-area" style="display: none;">
    <strong>Annotation:</strong>
    <div id="{{ id }}-anotation-elt" class="annotation-elt tooltip editable-text"
         style="margin: 1px 0px 1px 0px" title="Edit dataset annotation">
    </div>
</div>
</script>

<script type="text/template" class="template-history" id="template-history-displayApps">
{{#each displayApps}}
    {{label}}
    {{#each links}}
        <a target="{{target}}" href="{{href}}">{{text}}</a>
    {{/each}}
    <br />
{{/each}}
</script>
