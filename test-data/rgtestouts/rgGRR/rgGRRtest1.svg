<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.2//EN" "http://www.w3.org/Graphics/SVG/1.2/DTD/svg12.dtd">

<svg width="1280" height="800"
     xmlns="http://www.w3.org/2000/svg" version="1.2"
     xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1280 800" onload="init()">

  <script type="text/ecmascript" xlink:href="/static/scripts/checkbox_and_radiobutton.js"/>
  <script type="text/ecmascript" xlink:href="/static/scripts/helper_functions.js"/>
  <script type="text/ecmascript" xlink:href="/static/scripts/timer.js"/>
  <script type="text/ecmascript">
    <![CDATA[
      var checkBoxes = new Array();
      var radioGroupBandwidth;
      var colours = ['cyan','dodgerblue','mediumpurple','forestgreen','lightgreen','gold','gray'];
      function init() {
          var style = {"font-family":"Arial,Helvetica", "fill":"black", "font-size":12};
          var dist = 12;
          var yOffset = 4;
  
          //A checkBox for each relationship type dupe,parentchild,sibpair,halfsib,parents,unrel,unkn
          checkBoxes["dupe"] = new checkBox("dupe","checkboxes",20,40,"cbRect","cbCross",true,"Duplicate",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["parentchild"] = new checkBox("parentchild","checkboxes",20,60,"cbRect","cbCross",true,"Parent-Child",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["sibpairs"] = new checkBox("sibpairs","checkboxes",20,80,"cbRect","cbCross",true,"Sib-pairs",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["halfsibs"] = new checkBox("halfsibs","checkboxes",20,100,"cbRect","cbCross",true,"Half-sibs",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["parents"] = new checkBox("parents","checkboxes",20,120,"cbRect","cbCross",true,"Parents",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["unrelated"] = new checkBox("unrelated","checkboxes",20,140,"cbRect","cbCross",true,"Unrelated",style,dist,yOffset,undefined,hideShowLayer);
          checkBoxes["unknown"] = new checkBox("unknown","checkboxes",20,160,"cbRect","cbCross",true,"Unknown",style,dist,yOffset,undefined,hideShowLayer);

      }
                        
      function hideShowLayer(id, status, label) {
          var vis = "hidden";
          if (status) {
              vis = "visible";
          }
          document.getElementById(id).setAttributeNS(null, 'visibility', vis);
      }
     
      function showBTT(evt, rel, mm, dm, md, dd, n, mg, dg, lg, hg) {
    var x = parseInt(evt.pageX)-250;
    var y = parseInt(evt.pageY)-110;
        switch(rel) {
        case 0:
        fill = colours[rel];
        relt = "dupe";
        break;
        case 1:
        fill = colours[rel];
        relt = "parentchild";
        break;
        case 2:
        fill = colours[rel];
        relt = "sibpairs";
        break;
        case 3:
        fill = colours[rel];
        relt = "halfsibs";
        break;
        case 4:
        fill = colours[rel];
        relt = "parents";
        break;
        case 5:
        fill = colours[rel];
        relt = "unrelated";
        break;
        case 6:
        fill = colours[rel];
        relt = "unknown";
        break;
        default:
        fill = "cyan";
        relt = "ERROR_CODE: "+rel;
    }

    document.getElementById("btRel").textContent = "GROUP: "+relt;
    document.getElementById("btMean").textContent = "mean="+mm+" +/- "+dm;
        document.getElementById("btSdev").textContent = "sdev="+dm+" +/- "+dd;
        document.getElementById("btPair").textContent = "npairs="+n;
        document.getElementById("btGeno").textContent = "ngenos="+mg+" +/- "+dg+" (min="+lg+", max="+hg+")";
        document.getElementById("btHead").setAttribute('fill', fill);

        var tt = document.getElementById("btTip");
    tt.setAttribute("transform", "translate("+x+","+y+")");
    tt.setAttribute('visibility', 'visible');
      }

      function showOTT(evt, rel, s1, s2, mean, sdev, ngeno, rmean, rsdev) {
    var x = parseInt(evt.pageX)-150;
    var y = parseInt(evt.pageY)-180;

        switch(rel) {
        case 0:
        fill = colours[rel];
        relt = "dupe";
        break;
        case 1:
        fill = colours[rel];
        relt = "parentchild";
        break;
        case 2:
        fill = colours[rel];
        relt = "sibpairs";
        break;
        case 3:
        fill = colours[rel];
        relt = "halfsibs";
        break;
        case 4:
        fill = colours[rel];
        relt = "parents";
        break;
        case 5:
        fill = colours[rel];
        relt = "unrelated";
        break;
        case 6:
        fill = colours[rel];
        relt = "unknown";
        break;
        default:
        fill = "cyan";
        relt = "ERROR_CODE: "+rel;
    }

    document.getElementById("otRel").textContent = "PAIR: "+relt;
    document.getElementById("otS1").textContent = "s1="+s1;
    document.getElementById("otS2").textContent = "s2="+s2;
    document.getElementById("otMean").textContent = "mean="+mean;
        document.getElementById("otSdev").textContent = "sdev="+sdev;
        document.getElementById("otGeno").textContent = "ngenos="+ngeno;
        document.getElementById("otRmean").textContent = "relmean="+rmean;
        document.getElementById("otRsdev").textContent = "relsdev="+rsdev;
    document.getElementById("otHead").setAttribute('fill', fill);
        
        var tt = document.getElementById("otTip");
    tt.setAttribute("transform", "translate("+x+","+y+")");
    tt.setAttribute('visibility', 'visible');
      }

      function hideBTT(evt) {
        document.getElementById("btTip").setAttributeNS(null, 'visibility', 'hidden');
      }

      function hideOTT(evt) {
        document.getElementById("otTip").setAttributeNS(null, 'visibility', 'hidden');
      }

     ]]>    
  </script>
  <defs>
    <!-- symbols for check boxes -->
    <symbol id="cbRect" overflow="visible">
        <rect x="-5" y="-5" width="10" height="10" fill="white" stroke="dimgray" stroke-width="1" cursor="pointer"/>
    </symbol>
    <symbol id="cbCross" overflow="visible">
        <g pointer-events="none" stroke="black" stroke-width="1">
            <line x1="-3" y1="-3" x2="3" y2="3"/>
            <line x1="3" y1="-3" x2="-3" y2="3"/>
        </g>
    </symbol>
  </defs>

<desc>Developer Works Dynamic Scatter Graph Scaling Example</desc>

<!-- Now Draw the main X and Y axis -->
<g style="stroke-width:1.0; stroke:black; shape-rendering:crispEdges">
   <!-- X Axis top and bottom -->
   <path d="M 100 100 L 1250 100 Z"/>
   <path d="M 100 700 L 1250 700 Z"/>

   <!-- Y Axis left and right -->
   <path d="M 100  100 L 100  700 Z"/>
   <path d="M 1250 100 L 1250 700 Z"/>
</g>

<g transform="translate(100,100)">

  <!-- Grid Lines -->
  <g style="fill:none; stroke:#dddddd; stroke-width:1; stroke-dasharray:2,2; text-anchor:end; shape-rendering:crispEdges">
    
    <!-- Vertical grid lines -->
    <line x1="125" y1="0" x2="115" y2="600" />
    <line x1="230" y1="0" x2="230" y2="600" />
    <line x1="345" y1="0" x2="345" y2="600" />
    <line x1="460" y1="0" x2="460" y2="600" />
    <line x1="575" y1="0" x2="575" y2="600" style="stroke-dasharray:none;" />
    <line x1="690" y1="0" x2="690" y2="600"   />
    <line x1="805" y1="0" x2="805" y2="600"   />
    <line x1="920" y1="0" x2="920" y2="600"   />
    <line x1="1035" y1="0" x2="1035" y2="600" />

    <!-- Horizontal grid lines -->
    <line x1="0" y1="60" x2="1150" y2="60"   />
    <line x1="0" y1="120" x2="1150" y2="120" />
    <line x1="0" y1="180" x2="1150" y2="180" />
    <line x1="0" y1="240" x2="1150" y2="240" />
    <line x1="0" y1="300" x2="1150" y2="300" style="stroke-dasharray:none;" />
    <line x1="0" y1="360" x2="1150" y2="360" />
    <line x1="0" y1="420" x2="1150" y2="420" />
    <line x1="0" y1="480" x2="1150" y2="480" />
    <line x1="0" y1="540" x2="1150" y2="540" />
  </g>

  <!-- Legend -->
  <g style="fill:black; stroke:none" font-size="12" font-family="Arial" transform="translate(25,25)">
    <rect width="160" height="270" style="fill:none; stroke:black; shape-rendering:crispEdges" />
    <text x="5" y="20" style="fill:black; stroke:none;" font-size="13" font-weight="bold">Given Pair Relationship</text>
    <rect x="120" y="35" width="10" height="10" fill="cyan" stroke="cyan" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="55" width="10" height="10" fill="dodgerblue" stroke="dodgerblue" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="75" width="10" height="10" fill="mediumpurple" stroke="mediumpurple" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="95" width="10" height="10" fill="forestgreen" stroke="forestgreen" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="115" width="10" height="10" fill="lightgreen" stroke="lightgreen" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="135" width="10" height="10" fill="gold" stroke="gold" stroke-width="1" cursor="pointer"/>
    <rect x="120" y="155" width="10" height="10" fill="gray" stroke="gray" stroke-width="1" cursor="pointer"/>
    <text x="15"  y="195" style="fill:black; stroke:none" font-size="12" font-family="Arial" >Zscore gt 15</text>
    <circle cx="125" cy="192" r="6" style="stroke:red; fill:gold; fill-opacity:1.0; stroke-width:1;"/> 
    <text x="15" y="215" style="fill:black; stroke:none" font-size="12" font-family="Arial" >Zscore 4 to 15</text>
    <circle cx="125" cy="212" r="3" style="stroke:gold; fill:gold; fill-opacity:1.0; stroke-width:1;"/> 
    <text x="15" y="235" style="fill:black; stroke:none" font-size="12" font-family="Arial" >Zscore lt 4</text>
    <circle cx="125" cy="232" r="2" style="stroke:gold; fill:gold; fill-opacity:1.0; stroke-width:1;"/> 
    <g id="checkboxes">
    </g>
  </g>

 
   <g style='fill:black; stroke:none' font-size="17" font-family="Arial">
    <!-- X Axis Labels -->
    <text x="480" y="660">Mean Alleles Shared</text>
    <text x="0"    y="630" >1.0</text>
    <text x="277"  y="630" >1.25</text>
    <text x="564"  y="630" >1.5</text>
    <text x="842" y="630" >1.75</text>
    <text x="1140" y="630" >2.0</text>    
  </g>

  <g transform="rotate(270)" style="fill:black; stroke:none" font-size="17" font-family="Arial">
    <!-- Y Axis Labels -->
    <text x="-350" y="-40">SD Alleles Shared</text>
    <text x="-20" y="-10" >1.0</text>
    <text x="-165" y="-10" >0.75</text>
    <text x="-310" y="-10" >0.5</text>
    <text x="-455" y="-10" >0.25</text>
    <text x="-600" y="-10" >0.0</text>
  </g>

<!-- Plot Title -->
<g style="fill:black; stroke:none" font-size="18" font-family="Arial">
    <text x="425" y="-30">rgGRRtest1 (40 subjects, 5 snp)</text>
</g>

<!-- One group/layer of points for each relationship type -->
<g id="unrelated" style="stroke:gold; fill:gold; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
<circle cx="0" cy="600" r="2"
                onmouseover="showBTT(evt, 5, 1.00, 0.00, 0.00, 0.00, 2, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="287" cy="25" r="2"
                onmouseover="showBTT(evt, 5, 1.25, 0.00, 0.96, 0.00, 14, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="919" cy="331" r="2"
                onmouseover="showBTT(evt, 5, 1.80, 0.00, 0.45, 0.00, 188, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="230" cy="98" r="2"
                onmouseover="showBTT(evt, 5, 1.20, 0.00, 0.84, 0.00, 27, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="575" cy="0" r="2"
                onmouseover="showBTT(evt, 5, 1.50, 0.00, 1.00, 0.00, 5, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="230" cy="-57" r="2"
                onmouseover="showBTT(evt, 5, 1.20, 0.00, 1.10, 0.00, 3, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="862" cy="300" r="2"
                onmouseover="showBTT(evt, 5, 1.75, 0.00, 0.50, 0.00, 32, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="575" cy="253" r="2"
                onmouseover="showBTT(evt, 5, 1.50, 0.00, 0.58, 0.00, 34, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="0" cy="-92" r="2" onmouseover="showOTT(evt, 5, '105,1,3,2', '1340,9,0,0', 1.00, 1.15, 4, 1.60, 0.54)" onmouseout="hideOTT(evt)" />
<circle cx="287" cy="300" r="2"
                onmouseover="showBTT(evt, 5, 1.25, 0.00, 0.50, 0.00, 8, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="459" cy="271" r="2"
                onmouseover="showBTT(evt, 5, 1.40, 0.00, 0.55, 0.00, 77, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="0" cy="110" r="2"
                onmouseover="showBTT(evt, 5, 1.00, 0.00, 0.82, 0.00, 5, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="459" cy="63" r="2"
                onmouseover="showBTT(evt, 5, 1.40, 0.00, 0.89, 0.00, 46, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="1150" cy="600" r="2"
                onmouseover="showBTT(evt, 5, 2.00, 0.00, 0.00, 0.00, 53, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="0" cy="175" r="2"
                onmouseover="showBTT(evt, 5, 1.00, 0.00, 0.71, 0.00, 6, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="690" cy="63" r="2"
                onmouseover="showBTT(evt, 5, 1.60, 0.00, 0.89, 0.00, 25, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="230" cy="331" r="2"
                onmouseover="showBTT(evt, 5, 1.20, 0.00, 0.45, 0.00, 16, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="690" cy="271" r="2"
                onmouseover="showBTT(evt, 5, 1.60, 0.00, 0.55, 0.00, 172, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
</g>
<g id="parents" style="stroke:lightgreen; fill:lightgreen; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
<circle cx="919" cy="331" r="2"
                onmouseover="showBTT(evt, 4, 1.80, 0.00, 0.45, 0.00, 3, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="690" cy="63" r="2"
                onmouseover="showBTT(evt, 4, 1.60, 0.00, 0.89, 0.00, 3, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="287" cy="300" r="2" onmouseover="showOTT(evt, 4, '13,2,0,0', '13,3,0,0', 1.25, 0.50, 4, 1.62, 0.53)" onmouseout="hideOTT(evt)" />
<circle cx="459" cy="271" r="2"
                onmouseover="showBTT(evt, 4, 1.40, 0.00, 0.55, 0.00, 4, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="1150" cy="600" r="2"
                onmouseover="showBTT(evt, 4, 2.00, 0.00, 0.00, 0.00, 7, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="459" cy="63" r="2"
                onmouseover="showBTT(evt, 4, 1.40, 0.00, 0.89, 0.00, 7, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="690" cy="271" r="2"
                onmouseover="showBTT(evt, 4, 1.60, 0.00, 0.55, 0.00, 15, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
</g>
<g id="parentchild" style="stroke:dodgerblue; fill:dodgerblue; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
<circle cx="862" cy="300" r="2"
                onmouseover="showBTT(evt, 1, 1.75, 0.00, 0.50, 0.00, 3, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="575" cy="253" r="2" onmouseover="showOTT(evt, 1, '105,1,3,2', '105,3,0,0', 1.50, 0.58, 4, 1.82, 0.33)" onmouseout="hideOTT(evt)" />
<circle cx="919" cy="331" r="2"
                onmouseover="showBTT(evt, 1, 1.80, 0.00, 0.45, 0.00, 11, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="1150" cy="600" r="2"
                onmouseover="showBTT(evt, 1, 2.00, 0.00, 0.00, 0.00, 8, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
<circle cx="690" cy="271" r="2"
                onmouseover="showBTT(evt, 1, 1.60, 0.00, 0.55, 0.00, 3, 2, 0, 2, 2)"
                onmouseout="hideBTT(evt)" />
</g>
<g id="unknown" style="stroke:gray; fill:gray; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
</g>
<g id="halfsibs" style="stroke:forestgreen; fill:forestgreen; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
</g>
<g id="sibpairs" style="stroke:mediumpurple; fill:mediumpurple; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
</g>
<g id="dupe" style="stroke:cyan; fill:cyan; fill-opacity:1.0; stroke-width:1;" cursor="pointer">
</g>

<!-- End of Data -->
</g>
<g id="btTip" visibility="hidden" style="stroke-width:1.0; fill:black; stroke:none;" font-size="10" font-family="Arial">
  <rect width="250" height="110" style="fill:silver" rx="2" ry="2"/>
  <rect id="btHead" width="250" height="20" rx="2" ry="2" />
  <text id="btRel" y="14" x="85">unrelated</text>
  <text id="btMean" y="40" x="4">mean=1.5 +/- 0.04</text>
  <text id="btSdev" y="60" x="4">sdev=0.7 +/- 0.03</text>
  <text id="btPair" y="80" x="4">npairs=1152</text>
  <text id="btGeno" y="100" x="4">ngenos=4783 +/- 24 (min=1000, max=5000)</text>
</g>

<g id="otTip" visibility="hidden" style="stroke-width:1.0; fill:black; stroke:none;" font-size="10" font-family="Arial">
  <rect width="150" height="180" style="fill:silver" rx="2" ry="2"/>
  <rect id="otHead" width="150" height="20" rx="2" ry="2" />
  <text id="otRel" y="14" x="40">sibpairs</text>
  <text id="otS1" y="40" x="4">s1=fid1,iid1</text>
  <text id="otS2" y="60" x="4">s2=fid2,iid2</text>
  <text id="otMean" y="80" x="4">mean=1.82</text>
  <text id="otSdev" y="100" x="4">sdev=0.7</text>
  <text id="otGeno" y="120" x="4">ngeno=4487</text>
  <text id="otRmean" y="140" x="4">relmean=1.85</text>
  <text id="otRsdev" y="160" x="4">relsdev=0.65</text>
</g>
</svg>
