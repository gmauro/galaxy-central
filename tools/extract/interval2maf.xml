<tool id="Interval2Maf1" name="Extract MAF blocks">
  <description>from locally cached alignments</description>
  <command interpreter="python2.4">interval2maf.py --dbkey=$dbkey --chromCol=$input1_chromCol --startCol=$input1_startCol --endCol=$input1_endCol --strandCol=$input1_strandCol --mafType=$mafType --interval_file=$input1 --output_file=$out_file1</command>
  <inputs>
    <page>
        <param format="interval" name="input1" type="data" label="Interval File"/>
    </page>
    <page>
        <param name="mafType" label="Choose MAF source" type="select" dynamic_options="get_available_data( input1.dbkey )"/>
    </page>
   </inputs>
  <outputs>
    <data format="maf" name="out_file1" />
  </outputs>
  <tests>
    <test>
      <param name="input1" value="1.bed"/>
      <param name="mafType" value="ENCODE_TBA_hg17"/>
      <output name="out_file1" file="fsa_interval2maf.dat" />
    </test>
  </tests>
  <help>

.. class:: warningmark

If your query does not work, you need to ensure that you have specified a database build for your data.  Alignments may also not be available for your build or intervals at this time. It this happens e-mail us by clicking on "report bugs" link at the top of the screen. 

.. class:: infomark

What is the differences between these two tools: **Extract MAF blocks from locally cached alignments** and **Extract MAF blocks from user supplied alignments**?
 
 * **Extract MAF blocks from locally cached alignments** uses alignments stored at Galaxy installation at Penn State and is appropriate for most situations.  It takes only one dataset as the input - a list of genomic intervals.
 * **Extract MAF blocks from user supplied alignments** allows the user to work with his/her own alignemnts instead of those cached at Galaxy site. This tool takes two datasets as inputs - (1) genomic intervals and (2) alignemnts. 

-----

**What it does**

This tool takes genomic coordinates, superimposes them on multiple alignments (in MAF format) stored on Galaxy site, and excises alignment blocks corresponding to each set of coordinates. Alignments blocks that extend past START and/or END positions of an interval are trimmed. Note that a single genomic interval may correspond to two or more alignment blocks. In the following example user supplies two sets of genomic coordinates (intervals) and recieves two MAF blocks.

-----

**Example** 

- Input file::

    chr7	127475281	127475310	NM_000230	0	+
    chr7	127486011	127486166	D49487	0	+

- Extract 8-way multiZ alignments in MAF format from above file::

    ##maf version=1
    a score=301244.0
    s hg17.chr7     127475281 29 + 158628139 GTAGGAATCGCAGCGCCAGCGGTTGCAAG 
    s panTro1.chr6  129889135 29 + 161576975 GTAGGAATCGCAGCGCCAGCGGTTGCAAG 
    s mm5.chr6       28912407 29 + 149721531 GGAGGGATCCCTGCTCCAGCAGCTGCAAG 
    s rn3.chr4       56185364 29 + 187371129 GGAGGAATCCCTGCTCCAGCAGCTGCAAG 
    s canFam1.chr14  52867501 29 -  63549963 GGAGGAGTCGCGGCGCCAGCAGCTGCGAG 

    a score=407957.0
    s hg17.chr7     127486011 155 + 158628139 TGGGAAGGAAAATGCATTGGGGAACCCTGTGCGGATTCTTGTGGCTTTGGCCCTATCTTTTCTATGTCCAAGCTGTGCCCATCCAAAAAGTCCAAGATGACACCAAAACCCTCATCAAGACAATTGTCACCAGGATCAATGACATTTCACACACG 
    s panTro1.chr6  129900247 155 + 161576975 TGGGAAGGAAAATGCATTGGGGAACCCTGTGCGGATTCTTGTGGCTTTGGCCCTATCTTTTCTATGTCCAAGCTGTGCCCATCCAAAAAGTCCAAGATGACACCAAAACCCTCATCAAGACAATTGTCACCAGGATCAATGACATTTCACACACG 
    s mm5.chr6       28921128 155 + 149721531 CAGGGAGGAAAATGTGCTGGAGACCCCTGTGTCGGTTCCTGTGGCTTTGGTCCTATCTGTCTTATGTTCAAGCAGTGCCTATCCAGAAAGTCCAGGATGACACCAAAACCCTCATCAAGACCATTGTCACCAGGATCAATGACATTTCACACACG 
    s rn3.chr4       56195007 155 + 187371129 CAGCGAGGAAAATGTGCTGGAGACCCCTGTGCCGGTTCCTGTGGCTTTGGTCCTATCTGTCCTATGTTCAAGCTGTGCCTATCCACAAAGTCCAGGATGACACCAAAACCCTCATCAAGACCATTGTCACCAGGATCAATGACATTTCACACACG 
    s canFam1.chr14  52877854 155 -  63549963 GGGGAAGGAAAATGCGTTGTGGACCTCTGTGCCGATTCCTGTGGCTTTGGCCCTATCTGTCCTGTGTTGAAGCTGTGCCAATCCGAAAAGTCCAGGATGACACCAAAACCCTCATCAAGACGATTGTCGCCAGGATCAATGACATTTCACACACG 

  </help>
  <code file="interval2maf_code.py"/>
</tool>
