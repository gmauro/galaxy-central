<tool id="rgtableranks" name="TableRanker" version="0.01">
  <description>for multiple tabular files</description>
  <command interpreter="python">rgTableRanks.py --colnum "$colnum" --ntoreport "$ntoreport" --output_tab "$output_tab"
   --has_header "$has_header"
  #if $doNorm.normCols == "yes":
  --startNorm "$doNorm.startNorm" --endNorm "$doNorm.endNorm"
  #end if
  #for $fname in $inputs:
     --input_list "${fname.inputf}"  --input_name "${fname.inputf.name}"
  #end for 
  </command>
  <inputs>
    <repeat name="inputs" title="Input files to rank - must all have the identifier (eg gene name) in the same column" >
        <param name="inputf" type="data" format="tabular" label="Another input tabular file from your history"  size="100"/>
    </repeat>   
    <param name="colnum" type="integer" value="1" size="5" label="Column (1=first) containing the identifier to be ranked across all input files"/>
    <conditional name="doNorm">
     <param name="normCols" type="select" label="Evaluate normalised counts (report maximum fraction of each contig's reads in any sample - large fractions suggest poor evidence)" 
          help="Use this option if this is an edgeR or DESeq output file where normalised contig counts are available for each sample">
            <option value="yes">Yes</option>
            <option value="" selected="true">No</option>
        </param> 
        <when value="yes">
        <param name="startNorm" type="integer" value="0" size="5" label="Column (1=first) containing the first normalized count to be analysed"/>
        <param name="endNorm" type="integer" value="0" size="5" label="Column (1=first) containing the last normalized count to be analysed"/>
        </when> 
    </conditional>
    <param name="has_header" type="boolean" display="checkbox" checked="true" truevalue="True" falsevalue="False" label="Files all have a header row that should be ignored" />
    <param name="ntoreport" type="integer" value="100" size="5" label="Total number of top ranked ids to report (0=all)"/>
    <param name="title" type="text" value="Table ranks" size="80" label="Title for job outputs" help="Supply a meaningful name here to remind you what the outputs contain">
        <sanitizer invalid_char="">
            <valid initial="string.letters,string.digits"/>
        </sanitizer>
    </param>
  </inputs>
  <outputs>
    <data format="tabular" name="output_tab" label="${title}.xls"/>
  </outputs>
<help>

**What it does** 

This tool estimates the stability of the rank order of the appearances of identifiers in two or more tabular files. All the files are assumed to be in a meaningful order. The rank of each
symbol in the specified column of each file is recorded and the median and SD of the ranks and a count of the total number of files it was found in are returned for the number of top ranked ID's
requested as a new tabular file.

**What it's for** 

Designed to help perform sensitivity analysis of edgeR parameters on DGE estimates from rna-seq data but potentially useful for other similar efforts.

**Output sample** 

Note that how IL6 appeared only 4 times but was ranked high with little variation - this was because it was filtered
from most of the analyses being compared by the non-specific filter in edgeR - it seems odd that only one sample of 11 had 
&gt; 200 reads - all the others had at most 2 or 3 so the result
seems unconvincing. On the other hand GADD45A appears at the top and is very stable with low SDRank


========== ============  ========   ========
Term        MedianRank    SDRank     nfiles  
========== ============  ========   ========
GADD45A      1.0           2.790      10
KLK1C7       2.0           0.483      10
IL6          3.0           0.0         4
NR4A3        3.0           1.92       10
PPP1R14C     6.0           7.964      10
CXCL1        7.0           5.928       8
========== ============  ========   ========

=====

**Attribution** 

Copyright Ross Lazarus (ross period lazarus at gmail period com) June 2012

All rights reserved.

Licensed under the LGPL_


.. _LGPL: http://www.gnu.org/copyleft/lesser.html

</help>  

 </tool>
