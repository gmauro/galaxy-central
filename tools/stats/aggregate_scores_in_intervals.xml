<tool id="aggregate_scores_in_intervals1" description="from the table browser (equivalent to wiggle format)." name="Aggregate datapoints">
  <description>Appends the average, min, max, sum, and count of datapoints per interval</description>
  <command interpreter="python2.4">aggregate_scores_in_intervals.py $input2 $input1 $input1_chromCol $input1_startCol $input1_endCol $out_file1</command>
  <inputs>
    <page>
      <param format="wig" name="input2" type="data" label="Datapoints from table browser"/>
      <param format="interval" name="input1" type="data" label="Interval file"/>
    </page>
  </inputs>
  <outputs>
    <data format="interval" name="out_file1" metadata_source="input2"/>
  </outputs>
  <!-- TODO: This tool is currently not being used, uncomment and correct the tests if it ever is...
  <tests>
    <test>
      <param name="input1" value="aggregate_binned_scores_in_intervals.bed" />
      <param name="datasets" value="aggregate_binned_scores_in_intervals.wig" />
      <output name="out_file1" file="aggregate_binned_scores_in_intervals.out" />
    </test>
  </tests> -->
  <help>

.. class:: warningmark

This tool currently only works with data from genome builds hg16, hg17 or hg18.

.. class:: warningmark

This tool expects 2 input datasets, the first in wiggle format and the second in interval format. 

-----

.. class:: infomark

**TIP:** Aggregating data may throw exceptions if the data type (e.g., string, integer) in every line of the columns is not appropriate for the computation (e.g., attempting numerical calculations on strings).  If an exception is thrown, computation is stopped and an error message is displayed.

-----

**Syntax**

This tool returns aggregated data per interval in the form of the average, minimum and maximum of the data points for each given interval.

Note: Datapoints must be in the format returned by the table browser.

.. image:: ../../static/images/dat_points_table_brows_1.png

-----

**Example**

*Input*

.. image:: ../../static/images/aggregate_history1.png

*Result*

.. image:: ../../static/images/aggregate_history2.png

    </help>
</tool>
