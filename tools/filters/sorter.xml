<tool id="sort1" name="Sort" version="1.0.2">
    <description>data in ascending or descending order</description>
    <command interpreter="python">
        sorter.py
        --input=$input
        --output=$output
        --key=$column,$column$style$order
        #for $col in $column_set:
        --key=${col.other_column},${col.other_column}${col.other_style}${col.other_order}
        #end for
    </command>
    <inputs>
        <param format="tabular" name="input" type="data" label="Sort Dataset" />
        <param name="column" label="on column" type="data_column" data_ref="input" accept_default="true"/>
        <param name="style" type="select" label="with flavor">
            <option value="n">Numerical sort</option>
            <option value="">Alphabetical sort</option>
        </param>
        <param name="order" type="select" label="everything in">
            <option value="r">Descending order</option>
            <option value="">Ascending order</option>
        </param>
        <repeat name="column_set" title="Column selection">
            <param name="other_column" label="on column" type="data_column" data_ref="input" accept_default="true" />
            <param name="other_style" type="select" label="with flavor">
                <option value="n">Numerical sort</option>
                <option value="">Alphabetical sort</option>
            </param>
            <param name="other_order" type="select" label="everything in">
                <option value="r">Descending order</option>
                <option value="">Ascending order</option>
            </param>
        </repeat>
    </inputs>
    <outputs>
        <data format="input" name="output" metadata_source="input"/>
    </outputs>
    <tests>
        <test>
            <param name="input" value="sort_in1.bed"/>
            <param name="column" value="1"/>
            <param name="style" value=""/>
            <param name="order" value=""/>
            <param name="other_column" value="3"/>
            <param name="other_style" value="n"/>
            <param name="other_order" value="r"/>
            <output name="output" file="sort_out1.bed"/>
        </test>
        <test>
            <param name="input" value="sort_in1.bed"/>
            <param name="column" value="1"/>
            <param name="style" value=""/>
            <param name="order" value=""/>
            <param name="other_column" value="3"/>
            <param name="other_style" value="n"/>
            <param name="other_order" value=""/>
            <output name="output" file="sort_out2.bed"/>
        </test>
    </tests>

</tool>
