<tool id="join1" name="Join two Queries" version="2.0.0">
  <description>side by side on a specified field</description>
  <command interpreter="python">join.py $input1 $input2 $field1 $field2 $out_file1 $unmatched $partial --index_depth=3 --buffer=50000000</command>
  <inputs>
    <param format="tabular" name="input1" type="data" label="Join"/>
    <param name="field1" label="using column" type="data_column" data_ref="input1" />
    <param format="tabular" name="input2" type="data" label="with" />
    <param name="field2" label="and column" type="data_column" data_ref="input2" />
    <param name="unmatched" type="select" label="Keep lines of first input that do not join with second input">
      <option value="-u">Yes</option>
      <option value="" selected="true">No</option>
    </param>
    <param name="partial" type="select" label="Keep lines of first input that are incomplete">
      <option value="-p">Yes</option>
      <option value="" selected="true">No</option>
    </param>
  </inputs>
  <outputs>
     <data format="input" name="out_file1" metadata_source="input1" />
  </outputs>
  <tests>
    <test>
      <param name="input1" value="1.bed"/>
      <param name="input2" value="2.bed"/>
      <param name="field1" value="2"/>
      <param name="field2" value="2"/>
      <param name="unmatched" value=""/>
      <param name="partial" value=""/>
      <output name="out_file1" file="fs-joiner-1.dat"/>
    </test>
    <test>
      <param name="input1" value="1.bed"/>
      <param name="input2" value="2.bed"/>
      <param name="field1" value="2"/>
      <param name="field2" value="2"/>
      <param name="unmatched" value="-u"/>
      <param name="partial" value="-p"/>
      <output name="out_file1" file="fs-joiner-2.dat"/>
    </test>
  </tests>
  <help>

.. class:: warningmark

**This tool will attempt to reuse the metadata from your first input.** To change metadata assignments click on the "edit attributes" link of the history item generated by this tool.

.. class:: infomark

**TIP:** If your data is not TAB delimited, use *Edit Queries-&gt;Convert characters*

-----

**Syntax**

This tool joins lines of two queries on a common field. An empty string ("") is not a valid identifier.
You may choose to include lines of your first input that do not join with your second input.

- Columns are referenced with a **number**. For example, **3** refers to the 3rd column of a tab-delimited file.

-----

**Example**

Query1::

  chr1 10 20 geneA 
  chr1 50 80 geneB
  chr5 10 40 geneL

Query2::

  geneA tumor-supressor
  geneB Foxp2
  geneC Gnas1
  geneE INK4a

Joining the 4th column of Query1 with the 1st column of Query2 will yield::

  chr1 10 20 geneA geneA tumor-supressor
  chr1 50 80 geneB geneB Foxp2

Joining the 4th column of Query1 with the 1st column of Query2, while keeping all lines from Query1, will yield::

  chr1 10 20 geneA geneA tumor-supressor
  chr1 50 80 geneB geneB Foxp2
  chr5 10 40 geneL

</help>
</tool>
