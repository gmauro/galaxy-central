<?xml version="1.0"?>
<tool_dependency>
    <package name="r3" version="3.0.1">
        <repository name="package_r3" owner="fubar" prior_installation_required="True" toolshed="http://testtoolshed.g2.bx.psu.edu/" />
    </package>package_ghostscript_9_07
    <package name="ghostscript" version="9.07">
        <repository name="package_ghostscript_9_07" owner="fubar" prior_installation_required="True" toolshed="http://testtoolshed.g2.bx.psu.edu/" />
    </package>
    <package name="graphicsmagick" version="1.3.18">
        <repository name="package_graphicsmagick_1_3" owner="iuc" prior_installation_required="True" toolshed="http://testtoolshed.g2.bx.psu.edu/" />
    </package>
    <package name="biocbasics" version="2.12">
        <install version="1.0"> 
            <actions>
                <action type="set_environment_for_install">
                    <repository name="package_r3" owner="fubar" toolshed="http://testtoolshed.g2.bx.psu.edu/">
                        <package name="r3" version="3.0.1" />
                    </repository>
                </action>
                <action type="make_directory">$INSTALL_DIR</action>
                <action type="shell_command">echo "source('http://bioconductor.org/biocLite.R')" &gt; $INSTALL_DIR/runme.R</action>
                <action type="shell_command">echo "installme=c('edgeR','limma','DESeq','DESeq2')" &gt;&gt; $INSTALL_DIR/runme.R</action>
                <action type="shell_command">echo "biocLite()" &gt;&gt; $INSTALL_DIR/runme.R</action>
                <action type="shell_command">echo "biocLite(installme)" &gt;&gt; $INSTALL_DIR/runme.R</action>
                <action type="shell_command">echo "install.packages(c('stringr','gplots'),dependencies=T,repos='http://cran.us.r-project.org')" &gt;&gt; $INSTALL_DIR/runme.R</action>
                <action type="shell_command">echo "quit(save='no')" &gt;&gt; $INSTALL_DIR/runme.R</action>                
                <action type="shell_command"> export PATH=$PATH &amp;&amp; export R_HOME=$R_HOME &amp;&amp; export R_LIBS=$R_LIBS &amp;&amp; R CMD BATCH $INSTALL_DIR/runme.R </action>
            </actions>
        </install>
        <readme>Installs some basic bioc packages for the edgeR wrapper and dependencies graphicsmagick (replaces imagemagick) and ghostscript for compressing R's bloated pdfs
        It's clunky but this is the most convenient way I could get anything installed into the package_r3
        Note we use cran at fred hutch since no fastest mirror thingy
       </readme>
    </package>
</tool_dependency>
